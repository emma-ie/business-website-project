<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bookshop Homepage</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>

<body>
    <!-- Bootstrap Navbar -->
    <nav class="navbar navbar-expand-md navbar-light bg-light mb-4">
        <div class="container">
            <a class="navbar-brand" href="/">The Book Nook</a> <!-- Brand name linking to homepage -->

            <div>
                <!-- Takes user to homepage; nav-link applies Bootstrap link styling -->
                <a class="nav-link d-inline fs-5 me-3" href="/">Home</a>
                <!-- Takes user to shop page; nav-link applies Bootstrap link styling -->
                <a class="nav-link d-inline fs-5 me-3" href="/shop">Shop</a>
                <!-- Takes user to checkout page; nav-link applies Bootstrap link styling -->
                <a class="nav-link d-inline fs-5 me-3" href="/checkout">Checkout</a>
                <!-- Takes user to contact page; nav-link applies Bootstrap link styling -->
                <a class="nav-link d-inline fs-5 me-3" href="/contact">Contact</a>
            </div>
        </div>
    </nav>
    <!-- End Bootstrap Navbar -->

    <div class="container mt-5">
        <div class="row">
            <!-- Left column: Book image-->
            <div class="col-md-5 text-center">
                <img src="/images/<%= myImage %>" class="img-fluid" alt="<%= title %>">
            </div>

            <!-- Right column: Book details -->
            <div class="col-md-7">
                <h1 id="book">
                    <%= title %>
                </h1>
                <p>
                    <%= description %>
                </p>
                <p id="price">
                    <%= price %>
                </p>

                <!-- Quantity selector - code snippet originally taken from lecture notes and modified slightly -->
                <select id="quantity" name="quantity">
                    <option value="0" selected disabled>Quantity</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>

                <!-- Add to basket button-->
                <button onclick="addToBasket()" type="button" class="btn btn-success">Add to Basket</button>

                <!-- Back to shop button -->
                <a href="/shop" class="btn btn-primary">Back to Shop</a>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js"
        integrity="sha384-G/EV+4j2dNv+tEPo3++6LCgdCROaejBqfUeNjuKAiuXbjrxilcCdDz6ZAVfHWe1Y"
        crossorigin="anonymous"></script>
    <script>
        function addToBasket() {
            let product = document.getElementById("book").innerText;
            let quantitySelect = document.getElementById("quantity");
            let quantity = quantitySelect.value;
            let price = document.getElementById("price").innerText;
            let priceQuantity = { price: price, quantity: quantity };
            localStorage.setItem(product, JSON.stringify(priceQuantity));
            alert("Added " + quantity + " x " + product + " to your basket." + price);
        }
    </script>
</body>

</html>